<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Risk Meter</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(to bottom, #87CEEB 0%, #98D8C8 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .container {
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            text-align: center;
        }

        h1 {
            color: #333;
            margin-bottom: 30px;
            font-size: 2em;
        }

        .gauge-container {
            position: relative;
            width: 500px;
            height: 280px;
            margin: 0 auto 30px;
        }

        #riskGauge {
            width: 100%;
            height: 100%;
        }

        .input-group {
            margin: 20px 0;
        }

        label {
            display: block;
            margin-bottom: 10px;
            color: #555;
            font-weight: bold;
        }

        input[type="number"] {
            padding: 12px 20px;
            font-size: 16px;
            border: 2px solid #ddd;
            border-radius: 8px;
            width: 200px;
            text-align: center;
            transition: border-color 0.3s;
        }

        input[type="number"]:focus {
            outline: none;
            border-color: #4CAF50;
        }

        button {
            padding: 12px 30px;
            font-size: 16px;
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            margin-left: 10px;
            transition: background 0.3s;
        }

        button:hover {
            background: #45a049;
        }

        button:active {
            transform: scale(0.98);
        }

        .risk-value {
            margin-top: 20px;
            font-size: 24px;
            font-weight: bold;
            color: #333;
        }

        .error {
            color: #f44336;
            margin-top: 10px;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>RISK METER</h1>

        <div class="gauge-container">
            <svg id="riskGauge" viewBox="0 0 500 280">
                <defs>
                    <!-- Define filters for shadow effects -->
                    <filter id="shadow" x="-50%" y="-50%" width="200%" height="200%">
                        <feGaussianBlur in="SourceAlpha" stdDeviation="3"/>
                        <feOffset dx="0" dy="2" result="offsetblur"/>
                        <feComponentTransfer>
                            <feFuncA type="linear" slope="0.3"/>
                        </feComponentTransfer>
                        <feMerge>
                            <feMergeNode/>
                            <feMergeNode in="SourceGraphic"/>
                        </feMerge>
                    </filter>
                </defs>

                <!-- LOW (Green) - 0 to 45 degrees -->
                <path d="M 75 240 A 175 175 0 0 1 153.03 90.97"
                      fill="none" stroke="#7FB041" stroke-width="60" stroke-linecap="round"/>

                <!-- MODERATE (Yellow) - 45 to 90 degrees -->
                <path d="M 153.03 90.97 A 175 175 0 0 1 250 65"
                      fill="none" stroke="#F4D03F" stroke-width="60" stroke-linecap="round"/>

                <!-- MODERATELY HIGH (Orange) - 90 to 135 degrees -->
                <path d="M 250 65 A 175 175 0 0 1 346.97 90.97"
                      fill="none" stroke="#F39C12" stroke-width="60" stroke-linecap="round"/>

                <!-- HIGH (Red) - 135 to 180 degrees -->
                <path d="M 346.97 90.97 A 175 175 0 0 1 425 240"
                      fill="none" stroke="#C0392B" stroke-width="60" stroke-linecap="round"/>

                <!-- Labels -->
                <text x="55" y="265" fill="#333" font-size="16" font-weight="bold">LOW</text>
                <text x="130" y="75" fill="#333" font-size="14" font-weight="bold">MODERATE</text>
                <text x="310" y="75" fill="#333" font-size="14" font-weight="bold">MODERATELY</text>
                <text x="335" y="92" fill="#333" font-size="14" font-weight="bold">HIGH</text>
                <text x="395" y="265" fill="#333" font-size="16" font-weight="bold">HIGH</text>

                <!-- Center circle with shadow -->
                <circle cx="250" cy="240" r="18" fill="#2C3E50" filter="url(#shadow)"/>
                <circle cx="250" cy="240" r="12" fill="#34495E"/>

                <!-- Needle -->
                <line id="needle" x1="250" y1="240" x2="250" y2="90"
                      stroke="#2C3E50" stroke-width="5" stroke-linecap="round"
                      transform="rotate(-90 250 240)" filter="url(#shadow)"/>

                <!-- Needle tip -->
                <circle id="needleTip" cx="250" cy="90" r="10" fill="#C0392B"
                        transform="rotate(-90 250 240)" filter="url(#shadow)"/>
            </svg>
        </div>

        <div class="input-group">
            <label for="riskInput">Enter Risk Value (0-100):</label>
            <input type="number" id="riskInput" min="0" max="100" value="0" />
            <button onclick="updateRisk()">Update</button>
        </div>

        <div class="risk-value" id="riskValue">Risk Level: 0</div>
        <div class="error" id="errorMessage"></div>
    </div>

    <script>
        let currentAngle = -90; // Start at -90 degrees (leftmost position)

        function updateRisk() {
            const input = document.getElementById('riskInput');
            const errorMsg = document.getElementById('errorMessage');
            const riskValue = document.getElementById('riskValue');
            const value = parseInt(input.value);

            // Validate input
            errorMsg.textContent = '';
            if (isNaN(value) || value < 0 || value > 100) {
                errorMsg.textContent = 'Please enter a value between 0 and 100';
                return;
            }

            // Calculate target angle: -90 to 90 degrees (180 degree range)
            const targetAngle = -90 + (value * 180 / 100);

            // Animate the needle
            animateNeedle(currentAngle, targetAngle, 1000);
            currentAngle = targetAngle;

            // Update the risk value display
            let riskLabel = '';
            if (value <= 25) {
                riskLabel = 'LOW';
            } else if (value <= 50) {
                riskLabel = 'MODERATE';
            } else if (value <= 75) {
                riskLabel = 'MODERATELY HIGH';
            } else {
                riskLabel = 'HIGH';
            }
            riskValue.textContent = `Risk Level: ${value} - ${riskLabel}`;
        }

        function animateNeedle(startAngle, endAngle, duration) {
            const needle = document.getElementById('needle');
            const needleTip = document.getElementById('needleTip');
            const startTime = performance.now();

            function animate(currentTime) {
                const elapsed = currentTime - startTime;
                const progress = Math.min(elapsed / duration, 1);

                // Easing function for smooth animation (ease-in-out)
                const easeProgress = progress < 0.5
                    ? 2 * progress * progress
                    : 1 - Math.pow(-2 * progress + 2, 2) / 2;

                const currentAngle = startAngle + (endAngle - startAngle) * easeProgress;

                needle.setAttribute('transform', `rotate(${currentAngle} 250 240)`);
                needleTip.setAttribute('transform', `rotate(${currentAngle} 250 240)`);

                if (progress < 1) {
                    requestAnimationFrame(animate);
                }
            }

            requestAnimationFrame(animate);
        }

        // Allow Enter key to update
        document.getElementById('riskInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                updateRisk();
            }
        });
    </script>
</body>
</html>
