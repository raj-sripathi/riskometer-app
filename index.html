<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Risk Meter</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(to bottom, #87CEEB 0%, #98D8C8 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .container {
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            text-align: center;
            max-width: 600px;
        }

        h1 {
            color: #333;
            margin-bottom: 30px;
            font-size: 2em;
        }

        .gauge-container {
            position: relative;
            width: 100%;
            max-width: 500px;
            margin: 0 auto 30px;
        }

        canvas {
            width: 100%;
            height: auto;
        }

        .input-group {
            margin: 20px 0;
        }

        label {
            display: block;
            margin-bottom: 10px;
            color: #555;
            font-weight: bold;
            font-size: 18px;
        }

        input[type="number"] {
            padding: 12px 20px;
            font-size: 18px;
            border: 2px solid #ddd;
            border-radius: 8px;
            width: 200px;
            text-align: center;
            transition: border-color 0.3s;
        }

        input[type="number"]:focus {
            outline: none;
            border-color: #4CAF50;
        }

        button {
            padding: 12px 30px;
            font-size: 18px;
            background: #5CB85C;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            margin-left: 10px;
            transition: background 0.3s;
            font-weight: bold;
        }

        button:hover {
            background: #4CAF50;
        }

        button:active {
            transform: scale(0.98);
        }

        .risk-value {
            margin-top: 20px;
            font-size: 24px;
            font-weight: bold;
            color: #333;
        }

        .error {
            color: #f44336;
            margin-top: 10px;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>RISK METER</h1>

        <div class="gauge-container">
            <canvas id="riskGauge" width="600" height="400"></canvas>
        </div>

        <div class="input-group">
            <label for="riskInput">Enter Risk Value (0-100):</label>
            <input type="number" id="riskInput" min="0" max="100" value="0" />
            <button onclick="updateRisk()">Update</button>
        </div>

        <div class="risk-value" id="riskValue">Risk Level: 0</div>
        <div class="error" id="errorMessage"></div>
    </div>

    <script>
        const canvas = document.getElementById('riskGauge');
        const ctx = canvas.getContext('2d');

        const centerX = 300;
        const centerY = 300;
        const radius = 200;
        const lineWidth = 50;

        let currentAngle = -Math.PI; // Start at -180 degrees (leftmost position)
        let animationId = null;

        // Draw the gauge background
        function drawGauge() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Draw LOW (Green) - 0% to 33%
            drawArc(-Math.PI, -Math.PI / 3, '#7CB342');

            // Draw MODERATE (Yellow) - 33% to 67%
            drawArc(-Math.PI / 3, Math.PI / 3, '#FDD835');

            // Draw HIGH (Red) - 67% to 100%
            drawArc(Math.PI / 3, Math.PI, '#E53935');

            // Draw labels
            ctx.fillStyle = '#333';
            ctx.font = 'bold 20px Arial';
            ctx.fillText('LOW', 80, 320);

            ctx.font = 'bold 18px Arial';
            ctx.fillText('MODERATE', 230, 110);

            ctx.font = 'bold 20px Arial';
            ctx.fillText('HIGH', 490, 320);

            // Draw center pivot
            ctx.beginPath();
            ctx.arc(centerX, centerY, 20, 0, 2 * Math.PI);
            ctx.fillStyle = '#fff';
            ctx.fill();
            ctx.strokeStyle = '#ddd';
            ctx.lineWidth = 2;
            ctx.stroke();

            ctx.beginPath();
            ctx.arc(centerX, centerY, 12, 0, 2 * Math.PI);
            ctx.fillStyle = '#424242';
            ctx.fill();
        }

        function drawArc(startAngle, endAngle, color) {
            ctx.beginPath();
            ctx.arc(centerX, centerY, radius, startAngle, endAngle);
            ctx.strokeStyle = color;
            ctx.lineWidth = lineWidth;
            ctx.lineCap = 'round';
            ctx.stroke();
        }

        function drawNeedle(angle) {
            const needleLength = radius - 30;
            const endX = centerX + needleLength * Math.cos(angle);
            const endY = centerY + needleLength * Math.sin(angle);

            // Draw shadow
            ctx.save();
            ctx.shadowColor = 'rgba(0, 0, 0, 0.3)';
            ctx.shadowBlur = 5;
            ctx.shadowOffsetX = 2;
            ctx.shadowOffsetY = 2;

            // Draw needle line
            ctx.beginPath();
            ctx.moveTo(centerX, centerY);
            ctx.lineTo(endX, endY);
            ctx.strokeStyle = '#212121';
            ctx.lineWidth = 5;
            ctx.lineCap = 'round';
            ctx.stroke();

            // Draw needle tip
            ctx.beginPath();
            ctx.arc(endX, endY, 10, 0, 2 * Math.PI);
            ctx.fillStyle = '#E53935';
            ctx.fill();

            ctx.restore();
        }

        function render() {
            drawGauge();
            drawNeedle(currentAngle);
        }

        function updateRisk() {
            const input = document.getElementById('riskInput');
            const errorMsg = document.getElementById('errorMessage');
            const riskValue = document.getElementById('riskValue');
            const value = parseInt(input.value);

            // Validate input
            errorMsg.textContent = '';
            if (isNaN(value) || value < 0 || value > 100) {
                errorMsg.textContent = 'Please enter a value between 0 and 100';
                return;
            }

            // Calculate target angle: -180 to 0 degrees (Ï€ radians range)
            const targetAngle = -Math.PI + (value / 100) * Math.PI;

            // Animate the needle
            animateNeedle(currentAngle, targetAngle, 1000);

            // Update the risk value display
            let riskLabel = '';
            if (value <= 33) {
                riskLabel = 'LOW';
            } else if (value <= 67) {
                riskLabel = 'MODERATE';
            } else {
                riskLabel = 'HIGH';
            }
            riskValue.textContent = `Risk Level: ${value} - ${riskLabel}`;
        }

        function animateNeedle(startAngle, endAngle, duration) {
            if (animationId) {
                cancelAnimationFrame(animationId);
            }

            const startTime = performance.now();

            function animate(currentTime) {
                const elapsed = currentTime - startTime;
                const progress = Math.min(elapsed / duration, 1);

                // Easing function for smooth animation (ease-in-out)
                const easeProgress = progress < 0.5
                    ? 2 * progress * progress
                    : 1 - Math.pow(-2 * progress + 2, 2) / 2;

                currentAngle = startAngle + (endAngle - startAngle) * easeProgress;
                render();

                if (progress < 1) {
                    animationId = requestAnimationFrame(animate);
                } else {
                    animationId = null;
                }
            }

            animationId = requestAnimationFrame(animate);
        }

        // Allow Enter key to update
        document.getElementById('riskInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                updateRisk();
            }
        });

        // Initial render
        render();
    </script>
</body>
</html>
