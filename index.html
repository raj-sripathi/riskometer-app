<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Risk Meter</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .container {
            background: white;
            padding: 50px 40px;
            border-radius: 30px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            text-align: center;
            max-width: 650px;
            width: 100%;
        }

        h1 {
            color: #2c3e50;
            margin-bottom: 40px;
            font-size: 2.5em;
            font-weight: 700;
            letter-spacing: 2px;
        }

        .gauge-wrapper {
            position: relative;
            margin: 0 auto 40px;
            width: 100%;
            max-width: 500px;
        }

        canvas {
            width: 100%;
            height: auto;
            display: block;
        }

        .input-section {
            margin: 30px 0;
        }

        label {
            display: block;
            margin-bottom: 15px;
            color: #555;
            font-weight: 600;
            font-size: 18px;
        }

        .input-wrapper {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        input[type="number"] {
            padding: 15px 25px;
            font-size: 20px;
            border: 3px solid #e0e0e0;
            border-radius: 12px;
            width: 180px;
            text-align: center;
            font-weight: bold;
            transition: all 0.3s;
        }

        input[type="number"]:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        button {
            padding: 15px 40px;
            font-size: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
        }

        button:active {
            transform: translateY(0);
        }

        .risk-display {
            margin-top: 30px;
            font-size: 28px;
            font-weight: bold;
            color: #2c3e50;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 15px;
        }

        .error {
            color: #e74c3c;
            margin-top: 15px;
            font-size: 16px;
            font-weight: 500;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>RISKOMETER</h1>

        <div class="gauge-wrapper">
            <canvas id="gaugeCanvas" width="600" height="350"></canvas>
        </div>

        <div class="input-section">
            <label for="riskInput">Enter Risk Value (0-100):</label>
            <div class="input-wrapper">
                <input type="number" id="riskInput" min="0" max="100" value="0" />
                <button onclick="updateGauge()">Update</button>
            </div>
        </div>

        <div class="risk-display" id="riskDisplay">Risk Level: 0 - LOW</div>
        <div class="error" id="errorMsg"></div>
    </div>

    <script>
        const canvas = document.getElementById('gaugeCanvas');
        const ctx = canvas.getContext('2d');

        // Configuration
        const config = {
            centerX: 300,
            centerY: 280,
            radius: 180,
            startAngle: Math.PI,
            endAngle: 2 * Math.PI,
            lineWidth: 60
        };

        let currentValue = 0;
        let targetValue = 0;
        let animationFrame = null;

        // Color scheme
        const colors = {
            low: '#7CB342',
            moderate: '#FDD835',
            high: '#E53935',
            needle: '#2c3e50',
            needleTip: '#c0392b',
            center: '#34495e'
        };

        function drawGaugeBackground() {
            const { centerX, centerY, radius, startAngle, endAngle, lineWidth } = config;

            // Calculate angles for each section
            const totalAngle = endAngle - startAngle;
            const lowEnd = startAngle + totalAngle / 3;
            const moderateEnd = startAngle + (2 * totalAngle) / 3;

            // Draw LOW section (green)
            ctx.beginPath();
            ctx.arc(centerX, centerY, radius, startAngle, lowEnd);
            ctx.strokeStyle = colors.low;
            ctx.lineWidth = lineWidth;
            ctx.lineCap = 'butt';
            ctx.stroke();

            // Draw MODERATE section (yellow)
            ctx.beginPath();
            ctx.arc(centerX, centerY, radius, lowEnd, moderateEnd);
            ctx.strokeStyle = colors.moderate;
            ctx.lineWidth = lineWidth;
            ctx.lineCap = 'butt';
            ctx.stroke();

            // Draw HIGH section (red)
            ctx.beginPath();
            ctx.arc(centerX, centerY, radius, moderateEnd, endAngle);
            ctx.strokeStyle = colors.high;
            ctx.lineWidth = lineWidth;
            ctx.lineCap = 'butt';
            ctx.stroke();

            // Draw labels
            ctx.fillStyle = '#2c3e50';
            ctx.font = 'bold 22px Arial';
            ctx.textAlign = 'left';
            ctx.fillText('LOW', 95, 300);

            ctx.textAlign = 'center';
            ctx.font = 'bold 20px Arial';
            ctx.fillText('MODERATE', 300, 115);

            ctx.textAlign = 'right';
            ctx.font = 'bold 22px Arial';
            ctx.fillText('HIGH', 505, 300);

            // Draw center circle
            ctx.beginPath();
            ctx.arc(centerX, centerY, 25, 0, 2 * Math.PI);
            ctx.fillStyle = 'white';
            ctx.fill();
            ctx.strokeStyle = '#bdc3c7';
            ctx.lineWidth = 3;
            ctx.stroke();

            ctx.beginPath();
            ctx.arc(centerX, centerY, 18, 0, 2 * Math.PI);
            ctx.fillStyle = colors.center;
            ctx.fill();
        }

        function drawNeedle(value) {
            const { centerX, centerY, radius, startAngle, endAngle } = config;

            // Calculate needle angle based on value (0-100)
            const angle = startAngle + (value / 100) * (endAngle - startAngle);
            const needleLength = radius - 35;

            const tipX = centerX + Math.cos(angle) * needleLength;
            const tipY = centerY + Math.sin(angle) * needleLength;

            // Shadow
            ctx.save();
            ctx.shadowColor = 'rgba(0, 0, 0, 0.3)';
            ctx.shadowBlur = 8;
            ctx.shadowOffsetX = 3;
            ctx.shadowOffsetY = 3;

            // Draw needle
            ctx.beginPath();
            ctx.moveTo(centerX, centerY);
            ctx.lineTo(tipX, tipY);
            ctx.strokeStyle = colors.needle;
            ctx.lineWidth = 6;
            ctx.lineCap = 'round';
            ctx.stroke();

            // Draw needle tip
            ctx.beginPath();
            ctx.arc(tipX, tipY, 12, 0, 2 * Math.PI);
            ctx.fillStyle = colors.needleTip;
            ctx.fill();

            ctx.restore();
        }

        function render(value) {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawGaugeBackground();
            drawNeedle(value);
        }

        function animateNeedle() {
            const speed = 2;
            const diff = targetValue - currentValue;

            if (Math.abs(diff) < 0.5) {
                currentValue = targetValue;
                render(currentValue);
                animationFrame = null;
                return;
            }

            currentValue += diff * 0.1;
            render(currentValue);
            animationFrame = requestAnimationFrame(animateNeedle);
        }

        function updateGauge() {
            const input = document.getElementById('riskInput');
            const display = document.getElementById('riskDisplay');
            const errorMsg = document.getElementById('errorMsg');

            const value = parseInt(input.value);

            errorMsg.textContent = '';

            if (isNaN(value) || value < 0 || value > 100) {
                errorMsg.textContent = 'Please enter a value between 0 and 100';
                return;
            }

            targetValue = value;

            // Determine risk level
            let level = '';
            if (value <= 33) {
                level = 'LOW';
            } else if (value <= 67) {
                level = 'MODERATE';
            } else {
                level = 'HIGH';
            }

            display.textContent = `Risk Level: ${value} - ${level}`;

            if (animationFrame) {
                cancelAnimationFrame(animationFrame);
            }
            animateNeedle();
        }

        // Enter key support
        document.getElementById('riskInput').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                updateGauge();
            }
        });

        // Initial render
        render(0);
    </script>
</body>
</html>
